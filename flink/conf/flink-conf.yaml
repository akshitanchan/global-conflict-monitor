# ========================
# Basic cluster settings
# ========================
jobmanager.rpc.address: jobmanager
parallelism.default: 2
taskmanager.numberOfTaskSlots: 4

# ========================
# Memory settings
# ========================
# JobManager
jobmanager.memory.process.size: 2g

# TaskManager
# Increase to handle large Debezium snapshots
taskmanager.memory.process.size: 8g

# ========================
# Checkpointing settings
# ========================
execution.checkpointing.interval: 10s
execution.checkpointing.mode: EXACTLY_ONCE
execution.checkpointing.timeout: 2min
execution.checkpointing.min-pause: 5s
execution.checkpointing.max-concurrent-checkpoints: 1

# ========================
# Restart strategy
# ========================
restart-strategy: fixed-delay
restart-strategy.fixed-delay.attempts: 10
restart-strategy.fixed-delay.delay: 5s

# ========================
# State backend
# ========================
# Using HashMap for small setups; increase to RocksDB for production
state.backend: hashmap
state.checkpoints.dir: file:///opt/flink/state/checkpoints
state.savepoints.dir: file:///opt/flink/state/savepoints

# ========================
# Web UI
# ========================
web.refresh-interval: 3000

# ========================
# Ports
# ========================
blob.server.port: 6124
query.server.port: 6125

# ========================
# Optional: Logging
# ========================
taskmanager.logging.level: INFO
jobmanager.logging.level: INFO

# ========================
# TaskManager task slot tuning (optional)
# ========================
# max heap per slot = taskmanager.memory.process.size / taskmanager.numberOfTaskSlots
# 8g / 4 slots = 2GB per slot â€” should be enough for CDC source snapshot
